<<<<<<< Updated upstream
main-app.js?v=1754287810841:1126 Download the React DevTools for a better development experience: https://react.dev/link/react-devtools
D:\chat_service\frontend\saas-chatbot\app\dashboard\chatbots\[id]\page.tsx:29 ğŸ” Fetching chatbot details for ID: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\lib\api.ts:86 ğŸ‘¤ Current user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:117 ğŸš€ API Request (Supabase-native): {url: 'http://localhost:8000/api/v1/chatbots/5e69ab00-d86â€¦338a0895?user_email=akhilpalla%40webuildtrades.co', method: 'GET', userEmail: 'akhilpalla@webuildtrades.co', body: null}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:126 ğŸ“¡ Attempt 1/4 - Fetching: http://localhost:8000/api/v1/chatbots/5e69ab00-d866-46ab-b20b-fec3338a0895?user_email=akhilpalla%40webuildtrades.co
content_script.js:2726 [tiptap warn]: Duplicate extension names found: ['link', 'dropCursor', 'codeBlock', 'image']. This can lead to issues.
e.<computed> @ content_script.js:2726
resolve @ content_script_sidebar.js:628
B @ content_script_sidebar.js:628
createExtensionManager @ content_script_sidebar.js:628
t.Editor @ content_script_sidebar.js:628
g @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
Dl @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
_l @ content_script_sidebar.js:3018
pl @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Ui @ content_script_sidebar.js:3018
qi @ content_script_sidebar.js:3018
sl @ content_script_sidebar.js:3018
enqueueSetState @ content_script_sidebar.js:3018
g.setState @ content_script_sidebar.js:3018
processMutation @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:1074
s.emit @ content_script_sidebar.js:747
emitMutation @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
a @ content_script_sidebar.js:2
Promise.then
l @ content_script_sidebar.js:2
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
u @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
c @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:3360
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
Y.init @ content_script_sidebar.js:3360
(anonymous) @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
processUIEvent @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
processUIEvent @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
processEvent @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
componentDidMount @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:4490
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
componentDidMount @ content_script_sidebar.js:4490
us @ content_script_sidebar.js:3018
Al @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Cl @ content_script_sidebar.js:3018
pl @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Ui @ content_script_sidebar.js:3018
qi @ content_script_sidebar.js:3018
sl @ content_script_sidebar.js:3018
enqueueSetState @ content_script_sidebar.js:3018
g.setState @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:4490
a @ content_script_sidebar.js:2
Promise.then
l @ content_script_sidebar.js:2
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
componentDidMount @ content_script_sidebar.js:4490
us @ content_script_sidebar.js:3018
Al @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Cl @ content_script_sidebar.js:3018
pl @ content_script_sidebar.js:3018
sl @ content_script_sidebar.js:3018
Vl @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:3018
fl @ content_script_sidebar.js:3018
Ql @ content_script_sidebar.js:3018
t.render @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:4490
(anonymous) @ content_script_sidebar.js:4490
a @ content_script_sidebar.js:2
Promise.then
l @ content_script_sidebar.js:2
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
c @ content_script_sidebar.js:4490
(anonymous) @ content_script_sidebar.js:4490
s.emit @ content_script.js:747
(anonymous) @ content_script.js:2726
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
reloadComponent @ content_script.js:2726
(anonymous) @ content_script.js:2726
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
reloadRibbon @ content_script.js:2726
(anonymous) @ content_script.js:2726
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
handleHistoryStateUpdate @ content_script.js:2726
handleHistoryStateUpdate @ content_script.js:411
(anonymous) @ content_script.js:411
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
d @ content_script.js:411
messageResponder @ content_script.js:411
onMessage @ browser-polyfill.js:1079
D:\chat_service\frontend\saas-chatbot\lib\api.ts:129 âœ… Response received: {status: 200, statusText: 'OK', headers: {â€¦}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:157 ğŸ“¦ Response data: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally â€¦fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant â€¦y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {â€¦},Â â€¦}
D:\chat_service\frontend\saas-chatbot\app\dashboard\chatbots\[id]\page.tsx:31 âœ… Chatbot data loaded: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally â€¦fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant â€¦y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {â€¦},Â â€¦}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 ğŸ” VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 ğŸ” VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 ğŸ” VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and servicesâ€”offering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 ğŸ” VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 ğŸ” VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 ğŸ” VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 ğŸ” VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 ğŸ” VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 ğŸ” VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 ğŸ” VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 ğŸ” VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 ğŸ” VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 ğŸ¤ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 ğŸ” RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 ğŸ” RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 ğŸ” RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 ğŸ”§ VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 ğŸ” VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 ğŸ” VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 ğŸ” VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 âœ… VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 ğŸ”Š TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 ğŸ”Š TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 ğŸ”Š TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 ğŸ”Š TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 âœ… TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 ğŸ”Š TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 ğŸ”Š TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 ğŸ”Š TTS DEBUG: Available browser voices: 0
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 ğŸ”Š TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 ğŸ”Š TTS DEBUG: ğŸ“‹ TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 ğŸ”Š TTS DEBUG: âœ… Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 ğŸ”Š TTS DEBUG: ğŸ”§ Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 ğŸ”Š TTS DEBUG: ğŸ’° COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 ğŸ”Š TTS DEBUG: ğŸ”§ NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 ğŸ”Š TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 âœ… VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 ğŸ” VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 ğŸ” VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 ğŸ” VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and servicesâ€”offering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 ğŸ” VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 ğŸ” VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 ğŸ” VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 ğŸ” VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 ğŸ” VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 ğŸ” VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 ğŸ” VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 ğŸ” VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 ğŸ” VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 ğŸ¤ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 ğŸ” RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 ğŸ” RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 ğŸ” RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 ğŸ”§ VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 ğŸ” VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 ğŸ” VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 ğŸ” VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 âœ… VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 ğŸ”Š TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 ğŸ”Š TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 ğŸ”Š TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 ğŸ”Š TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 âœ… TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 ğŸ”Š TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 ğŸ”Š TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 ğŸ”Š TTS DEBUG: Available browser voices: 0
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 ğŸ”Š TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 ğŸ”Š TTS DEBUG: ğŸ“‹ TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 ğŸ”Š TTS DEBUG: âœ… Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 ğŸ”Š TTS DEBUG: ğŸ”§ Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 ğŸ”Š TTS DEBUG: ğŸ’° COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 ğŸ”Š TTS DEBUG: ğŸ”§ NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 ğŸ”Š TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 âœ… VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:184 ğŸ”Š TTS DEBUG: Available browser voices (delayed): 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:185 ğŸ”Š TTS DEBUG: ğŸ“‹ Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:184 ğŸ”Š TTS DEBUG: Available browser voices (delayed): 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:185 ğŸ”Š TTS DEBUG: ğŸ“‹ Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:67 ğŸ“š RAG DEBUG: Loading documents for chatbot: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:67 ğŸ“š RAG DEBUG: Loading documents for chatbot: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:71 âœ… RAG DEBUG: Documents loaded successfully: {count: 1, documents: Array(1)}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:71 âœ… RAG DEBUG: Documents loaded successfully: {count: 1, documents: Array(1)}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:96 ğŸ’¾ VOICE DEBUG: ==================== SAVING SETTINGS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:97 ğŸ’¾ VOICE DEBUG: Saving chatbot settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:98 ğŸ’¾ VOICE DEBUG: Current settings state: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and servicesâ€”offering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "is_active": true,
  "appearance_config": {
    "theme": "light",
    "primaryColor": "#3b82f6",
    "position": "bottom-right",
    "greetingMessage": "Hello! How can I help you today?",
    "botName": "Assistant",
    "showAvatar": true,
    "avatarUrl": "",
    "welcomeTitle": "Welcome"
  },
  "behavior_config": {
    "enableVoice": true,
    "enableTypingIndicator": true,
    "enableEmoji": true,
    "maxTokens": 1000,
    "temperature": 0.7
  }
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:99 ğŸ’¾ VOICE DEBUG: Voice settings specifically: {enableVoice: true, behaviorConfigExists: true, fullBehaviorConfig: {â€¦}}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:116 ğŸ’¾ VOICE DEBUG: Update data being sent to backend: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and servicesâ€”offering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "is_active": true,
  "appearance_config": {
    "theme": "light",
    "primaryColor": "#3b82f6",
    "position": "bottom-right",
    "greetingMessage": "Hello! How can I help you today?",
    "botName": "Assistant",
    "showAvatar": true,
    "avatarUrl": "",
    "welcomeTitle": "Welcome"
  },
  "behavior_config": {
    "enableVoice": true,
    "enableTypingIndicator": true,
    "enableEmoji": true,
    "maxTokens": 1000,
    "temperature": 0.7
  }
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:117 ğŸ’¾ VOICE DEBUG: behavior_config in update data: {enableVoice: true, enableTypingIndicator: true, enableEmoji: true, maxTokens: 1000, temperature: 0.7}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:118 ğŸ’¾ VOICE DEBUG: enableVoice in update data: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:120 ğŸ“¡ VOICE DEBUG: Sending update request to backend...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:121 ğŸ”„ EMBEDDING: Starting save with automatic embedding generation...
D:\chat_service\frontend\saas-chatbot\lib\api.ts:86 ğŸ‘¤ Current user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:117 ğŸš€ API Request (Supabase-native): {url: 'http://localhost:8000/api/v1/chatbots/5e69ab00-d86â€¦338a0895?user_email=akhilpalla%40webuildtrades.co', method: 'PUT', userEmail: 'akhilpalla@webuildtrades.co', body: {â€¦}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:126 ğŸ“¡ Attempt 1/4 - Fetching: http://localhost:8000/api/v1/chatbots/5e69ab00-d866-46ab-b20b-fec3338a0895?user_email=akhilpalla%40webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:129 âœ… Response received: {status: 200, statusText: 'OK', headers: {â€¦}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:157 ğŸ“¦ Response data: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally â€¦fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant â€¦y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {â€¦},Â â€¦}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:124 âœ… VOICE DEBUG: Settings saved successfully
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:125 âœ… VOICE DEBUG: Backend response: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally â€¦fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant â€¦y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {â€¦},Â â€¦}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:129 ğŸ“Š EMBEDDING: Processing results: undefined
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 ğŸ” VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 ğŸ” VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 ğŸ” VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and servicesâ€”offering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 ğŸ” VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 ğŸ” VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 ğŸ” VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 ğŸ” VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 ğŸ” VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 ğŸ” VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 ğŸ” VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 ğŸ” VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 ğŸ” VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 ğŸ¤ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 ğŸ” RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 ğŸ” RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 ğŸ” RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 ğŸ”§ VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 ğŸ” VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 ğŸ” VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 ğŸ” VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 âœ… VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 ğŸ”Š TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 ğŸ”Š TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 ğŸ”Š TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 ğŸ”Š TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 âœ… TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 ğŸ”Š TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 ğŸ”Š TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 ğŸ”Š TTS DEBUG: Available browser voices: 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:191 ğŸ”Š TTS DEBUG: ğŸ“‹ Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 ğŸ”Š TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 ğŸ”Š TTS DEBUG: ğŸ“‹ TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 ğŸ”Š TTS DEBUG: âœ… Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 ğŸ”Š TTS DEBUG: ğŸ”§ Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 ğŸ”Š TTS DEBUG: ğŸ’° COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 ğŸ”Š TTS DEBUG: ğŸ”§ NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 ğŸ”Š TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 âœ… VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 ğŸ” VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 ğŸ” VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 ğŸ” VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and servicesâ€”offering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 ğŸ” VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 ğŸ” VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 ğŸ” VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 ğŸ” VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 ğŸ” VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 ğŸ” VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 ğŸ” VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 ğŸ” VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 ğŸ” VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 ğŸ¤ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 ğŸ” RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 ğŸ” RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 ğŸ” RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 ğŸ”§ VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 ğŸ” VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 ğŸ” VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 ğŸ” VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 âœ… VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 ğŸ”Š TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 ğŸ”Š TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 ğŸ”Š TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 ğŸ”Š TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 âœ… TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 ğŸ”Š TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 ğŸ”Š TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 ğŸ”Š TTS DEBUG: Available browser voices: 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:191 ğŸ”Š TTS DEBUG: ğŸ“‹ Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 ğŸ”Š TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 ğŸ”Š TTS DEBUG: ğŸ“‹ TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 ğŸ”Š TTS DEBUG: âœ… Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 ğŸ”Š TTS DEBUG: ğŸ”§ Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 ğŸ”Š TTS DEBUG: ğŸ¯ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 ğŸ”Š TTS DEBUG: ğŸ’° COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 ğŸ”Š TTS DEBUG: ğŸ”§ NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 ğŸ”Š TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 âœ… VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:694 ğŸ§ª Sending test chat message to chatbot: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:703 ğŸ” RAG FLOW DEBUG: ==================== TEXT MESSAGE PROCESSING ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:704 ğŸ“¡ RAG FLOW DEBUG: Calling testChatbot API with message: What are your customer support business hours?
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:705 ğŸ’¬ RAG FLOW DEBUG: Conversation history length: 1
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:706 ğŸ” RAG FLOW DEBUG: Voice enabled for this chatbot: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:707 ğŸ” RAG FLOW DEBUG: This is a TEXT-based message (not voice input)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:708 ğŸ” RAG FLOW DEBUG: Chatbot behavior_config: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:709 ğŸ” RAG FLOW DEBUG: Expected: RAG should work normally for text messages regardless of voice setting
D:\chat_service\frontend\saas-chatbot\lib\api.ts:86 ğŸ‘¤ Current user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:117 ğŸš€ API Request (Supabase-native): {url: 'http://localhost:8000/api/v1/chatbots/5e69ab00-d86â€¦est-chat?user_email=akhilpalla%40webuildtrades.co', method: 'POST', userEmail: 'akhilpalla@webuildtrades.co', body: {â€¦}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:126 ğŸ“¡ Attempt 1/4 - Fetching: http://localhost:8000/api/v1/chatbots/5e69ab00-d866-46ab-b20b-fec3338a0895/test-chat?user_email=akhilpalla%40webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:129 âœ… Response received: {status: 200, statusText: 'OK', headers: {â€¦}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:157 ğŸ“¦ Response data: {response: 'Our customer support is available 24 hours a day, â€¦here anything specific I can help you with today?', conversation_id: 'test', rag_enabled: false, context_count: 0, model: 'llama-3.1-8b-instant'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:716 ğŸ” RAG FLOW DEBUG: ==================== RESPONSE RECEIVED ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:717 ğŸ¯ RAG FLOW DEBUG: Got chatbot response: {hasResponse: true, responseLength: 345, ragEnabled: false, contextCount: 0, model: 'llama-3.1-8b-instant',Â â€¦}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:726 ğŸ” RAG FLOW DEBUG: RAG Analysis:
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:727    - RAG Enabled: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:728    - Context Count: 0
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:729    - Contains PDF content: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:730    - Is generic response: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:747 ğŸ” RAG FLOW DEBUG: ==================== VOICE PROCESSING CHECK ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:748 ğŸ”Š RAG FLOW DEBUG: Text message response completed: {voiceEnabled: true, shouldUseVoice: true, responseLength: 345, behaviorConfig: {â€¦}}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:754 ğŸ” RAG FLOW DEBUG: Voice processing decision:
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:755    - Voice enabled in settings: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:756    - Should use voice for response: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:757    - Will trigger TTS: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email, or visit us in-store for assistance. If you're calling from within the US, you can reach us at 1-800-WALMART (1-800-925-6278). We're here to help with any questions or concerns you may have. Is there anything specific I can help you with today?
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:760 ğŸ”Š TEXT DEBUG: âœ… FORCING speech synthesis for text message (bypassing state issue)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:761 ğŸ”Š TEXT DEBUG: Text message response to speak: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email,...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:762 ğŸ”Š TEXT DEBUG: ğŸ¯ Using HYBRID TTS: Deepgram (Primary) â†’ Browser (Fallback)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:478 ğŸ”Š TTS DEBUG: ==================== HYBRID TTS SYSTEM ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:479 ğŸ”Š TTS DEBUG: speakResponse called with text: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email,...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:480 ğŸ”Š TTS DEBUG: voiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:481 ğŸ”Š TTS DEBUG: text length: 345
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:482 ğŸ”Š TTS DEBUG: ğŸ¯ Using HYBRID TTS: Deepgram (Primary) â†’ Browser (Fallback)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:491 ğŸ”Š TTS DEBUG: ğŸ¯ TRYING: Deepgram TTS (Primary)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:360 ğŸ”Š DEEPGRAM TTS: ==================== DEEPGRAM TTS SYSTEM ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:361 ğŸ”Š DEEPGRAM TTS: Starting TTS request for text: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email,...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:362 ğŸ”Š DEEPGRAM TTS: Text length: 345
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:368 ğŸ”Š DEEPGRAM TTS: Calling frontend TTS API route...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:377 ğŸ”Š DEEPGRAM TTS: Got user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:404 ğŸ”Š DEEPGRAM TTS: Frontend API response status: 200
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:418 ğŸ”Š DEEPGRAM TTS: Received audio buffer: {size: 139494, type: 'ArrayBuffer'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:431 ğŸ”Š DEEPGRAM TTS: Created audio URL: blob:http://localhost:3000/8d12cca5-8c07-4fd9-9b52-5ef65517b776
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:463 ğŸ”Š DEEPGRAM TTS: Starting audio playback...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:446 ğŸ”Š DEEPGRAM TTS: Audio playback started
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:438 ğŸ”Š DEEPGRAM TTS: Audio loading started
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:442 ğŸ”Š DEEPGRAM TTS: Audio can start playing
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:466 ğŸ”Š DEEPGRAM TTS: âœ… SUCCESS: Deepgram TTS completed successfully
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:474 ğŸ”Š DEEPGRAM TTS: ================================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:493 ğŸ”Š TTS DEBUG: âœ… SUCCESS: Deepgram TTS completed successfully
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:519 ğŸ”Š TTS DEBUG: ================================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:766 ğŸ”Š TEXT DEBUG: âœ… Hybrid TTS completed for text message
=======
(venv) D:\chat_service\backend>  python test_rag_comprehensive.py
ğŸ¯ Comprehensive RAG System Test
========================================
Token will not been saved to git credential helper. Pass `add_to_git_credential=True` if you want to set the git credential as well.
Failed to login to Hugging Face: Invalid token passed!
Failed to load model BAAI/bge-small-en-v1.5: 401 Client Error. (Request ID: Root=1-68919865-16dbb47062dcbd3f178f1afe;ef705566-343d-471c-a1a6-47e3c683c0bb)

Repository Not Found for url: https://huggingface.co/api/models/BAAI/bge-small-en-v1.5.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated.
User Access Token "saas-chatbot" is expired
Using dummy embeddings - model loading failed
Failed to initialize Google Drive service: Service account info was not in the expected format, missing fields client_email, token_uri.
ğŸ¤– Testing with chatbot: 5e69ab00...
ğŸ‘¤ Testing with user: 6ff34613...

ğŸ“Š Test 1: Document and Embedding Status
------------------------------
ğŸ“„ Documents found: 1
  â€¢ Customer_Support_Policy_Manual.pdf (processed: True)
ğŸ”¢ Vector embeddings found: 2
  â€¢ Sample embedding dimension: 4704
  â€¢ Sample content length: 365 chars

ğŸ§  Test 2: Embedding Generation
------------------------------
ğŸ“ Test query: 'What are your customer support business hours?'
ğŸ§  RAG DEBUG: Generating embedding for text (length: 46 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 46 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
âœ… Embedding generated: 384 dimensions
ğŸ“Š Embedding preview: [-0.0676, -0.0025, ..., -0.0310]

ğŸ” Test 3: Vector Store Retrieval
------------------------------
ğŸ” RAG DEBUG: Starting context retrieval for query: 'What are your customer support business hours?'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 3, Threshold: 0.1
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 46 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 46 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 2 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: similarity=0.6244
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
ğŸ“ RAG DEBUG: Processing chunk 2: similarity=0.3609
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
ğŸ¯ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
ğŸ“– RAG DEBUG: Context 1 length: 997 chars
ğŸ“– RAG DEBUG: Context 2 length: 365 chars
ğŸ“š Retrieved contexts: 2
  ğŸ“„ Context 1 (similarity: 0.624376796223117):
      'Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...'
  ğŸ“„ Context 2 (similarity: 0.36092808842659):
      'Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...'

ğŸ”¬ Test 4: Hybrid Search
------------------------------
ğŸ” RAG DEBUG: Starting HYBRID context retrieval for query: 'What are your customer support business hours?'
ğŸ“‹ RAG DEBUG: Hybrid=True, BM25 weight=0.3, Vector weight=0.7
ğŸš€ RAG DEBUG: Performing hybrid search...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 46 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 46 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
Keyword search failed, using fallback: {'code': 'PGRST202', 'details': 'Searched for the function public.execute_sql with parameters params, sql_query or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.', 'hint': None, 'message': 'Could not find the function public.execute_sql(params, sql_query) in the schema cache'}
Simple keyword search failed: {'message': 'JSON could not be generated', 'code': 500, 'hint': 'Refer to full message for details', 'details': 'b\'<!DOCTYPE html>\\n<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->\\n<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->\\n<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en-US"> <![endif]-->\\n<!--[if gt IE 8]><!--> <html class="no-js" lang="en-US"> <!--<![endif]-->\\n<head>\\n<title>Worker threw exception | kcbiyzfcqvcgvnjxiytv.supabase.co | Cloudflare</title>\\n<meta charset="UTF-8" />\\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\\n<meta http-equiv="X-UA-Compatible" content="IE=Edge" />\\n<meta name="robots" content="noindex, nofollow" />\\n<meta name="viewport" content="width=device-width,initial-scale=1" />\\n<link rel="stylesheet" id="cf_styles-css" href="/cdn-cgi/styles/cf.errors.css" />\\n<!--[if lt IE 9]><link rel="stylesheet" id=\\\'cf_styles-ie-css\\\' href="/cdn-cgi/styles/cf.errors.ie.css" /><![endif]-->\\n<style>body{margin:0;padding:0}</style>\\n\\n\\n<!--[if gte IE 10]><!-->\\n<script>\\n  if (!navigator.cookieEnabled) {\\n    window.addEventListener(\\\'DOMContentLoaded\\\', function () {\\n      var cookieEl = document.getElementById(\\\'cookie-alert\\\');\\n      cookieEl.style.display = \\\'block\\\';\\n    })\\n  }\\n</script>\\n<!--<![endif]-->\\n\\n\\n</head>\\n<body>\\n  <div id="cf-wrapper">\\n    <div class="cf-alert cf-alert-error cf-cookie-error" id="cookie-alert" data-translate="enable_cookies">Please enable cookies.</div>\\n    <div id="cf-error-details" class="cf-error-details-wrapper">\\n      <div class="cf-wrapper cf-header cf-error-overview">\\n        <h1>\\n          <span class="cf-error-type" data-translate="error">Error</span>\\n          <span class="cf-error-code">1101</span>\\n          <small class="heading-ray-id">Ray ID: 96a3f043daafffa1 &bull; 2025-08-05 05:36:44 UTC</small>\\n        </h1>\\n        <h2 class="cf-subheadline" data-translate="error_desc">Worker threw exception</h2>\\n      </div><!-- /.header -->\\n\\n      <section></section><!-- spacer -->\\n\\n      <div class="cf-section cf-wrapper">\\n        <div class="cf-columns two">\\n          <div class="cf-column">\\n            <h2 data-translate="what_happened">What happened?</h2>\\n            <p>You\\\'ve requested a page on a website (kcbiyzfcqvcgvnjxiytv.supabase.co) that is on the <a href="https://www.cloudflare.com/5xx-error-landing/" target="_blank">Cloudflare</a> network. An unknown error occurred while rendering the page.</p>\\n          </div>\\n\\n          \\n          <div class="cf-column">\\n           
 <h2 data-translate="what_can_i_do">What can I do?</h2>\\n            <p><strong>If you are the owner of this website:</strong><br />refer to <a href="https://developers.cloudflare.com/workers/observability/errors/" target="_blank">Workers - Errors and Exceptions</a> and check Workers Logs for kcbiyzfcqvcgvnjxiytv.supabase.co.</p>\\n          </div>\\n          \\n        </div>\\n      </div><!-- /.section -->\\n\\n      <div class="cf-error-footer cf-wrapper w-240 lg:w-full py-10 sm:py-4 sm:px-8 mx-auto text-center sm:text-left border-solid border-0 border-t border-gray-300">\\n  <p class="text-13">\\n    <span class="cf-footer-item sm:block sm:mb-1">Cloudflare Ray ID: <strong class="font-semibold">96a3f043daafffa1</strong></span>\\n    <span class="cf-footer-separator sm:hidden">&bull;</span>\\n    <span id="cf-footer-item-ip" class="cf-footer-item hidden sm:block sm:mb-1">\\n      Your IP:\\n      <button type="button" id="cf-footer-ip-reveal" class="cf-footer-ip-reveal-btn">Click to reveal</button>\\n      <span class="hidden" id="cf-footer-ip">103.217.89.135</span>\\n      <span class="cf-footer-separator sm:hidden">&bull;</span>\\n    </span>\\n    <span class="cf-footer-item sm:block sm:mb-1"><span>Performance &amp; security by</span> <a rel="noopener noreferrer" href="https://www.cloudflare.com/5xx-error-landing" id="brand_link" target="_blank">Cloudflare</a></span>\\n    \\n  </p>\\n  <script>(function(){function d(){var b=a.getElementById("cf-footer-item-ip"),c=a.getElementById("cf-footer-ip-reveal");b&&"classList"in b&&(b.classList.remove("hidden"),c.addEventListener("click",function(){c.classList.add("hidden");a.getElementById("cf-footer-ip").classList.remove("hidden")}))}var a=document;document.addEventListener&&a.addEventListener("DOMContentLoaded",d)})();</script>\\n</div><!-- /.error-footer -->\\n\\n\\n    </div><!-- /#cf-error-details -->\\n  </div><!-- /#cf-wrapper -->\\n\\n  <script>\\n  window._cf_translation = {};\\n  \\n  \\n</script>\\n\\n</body>\\n</html>\\n\''}    
ğŸ“Š RAG DEBUG: Hybrid search returned 2 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: hybrid_score=0.7000, similarity=0.6244
ğŸ“ RAG DEBUG: Processing chunk 2: hybrid_score=0.4046, similarity=0.3609
âœ… RAG DEBUG: Hybrid retrieval complete - 2 contexts selected
ğŸ¯ Hybrid search results: 2
  ğŸ“„ Hybrid 1 (similarity: 0.624376796223117):
      'Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...'
  ğŸ“„ Hybrid 2 (similarity: 0.36092808842659):
      'Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...'

ğŸ’¬ Test 5: Message Service RAG Integration
------------------------------
ğŸ¤– Chatbot: voice-agent 
ğŸ¯ Generating RAG response...
ğŸ¤– RAG DEBUG: Starting LLM response generation
ğŸ“Š RAG DEBUG: RAG enabled: True
ğŸ¯ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895
ğŸ’¬ RAG DEBUG: User message: 'What are your customer support business hours?'
ğŸ” RAG DEBUG: RAG mode - retrieving relevant context...
ğŸ” RAG DEBUG: Starting context retrieval for query: 'What are your customer support business hours?'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 3, Threshold: 0.7
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 46 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 46 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 0 chunks
âš ï¸ RAG DEBUG: No relevant context found for query in chatbot 5e69ab00-d866-46ab-b20b-fec3338a0895
ğŸ“š RAG DEBUG: Retrieved 0 context chunks
âš ï¸ RAG DEBUG: No relevant context found - falling back to standard response
ğŸ”„ RAG DEBUG: No context available, generating standard response...
âœ… RAG DEBUG: Standard response generated (no context available)
âœ… Response generated successfully!
ğŸ“Š RAG enabled: False
ğŸ“Š Context count: 0
ğŸ“Š Model used: llama-3.1-8b-instant
ğŸ“„ Response preview: Our Walmart customer support team is available 24 hours a day, 7 days a week, to assist you with any questions or concerns you may have. You can reach us by phone, online chat, or through our mobile a... 

âš¡ Test 6: Performance Metrics
------------------------------
ğŸ” RAG DEBUG: Starting context retrieval for query: 'customer support hours'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 22 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 22 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.1350, 0.0177, ..., -0.0452]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 2 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: similarity=0.6848
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
ğŸ“ RAG DEBUG: Processing chunk 2: similarity=0.3535
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
ğŸ¯ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
ğŸ“– RAG DEBUG: Context 1 length: 997 chars
ğŸ“– RAG DEBUG: Context 2 length: 365 chars
ğŸ” RAG DEBUG: Starting context retrieval for query: 'escalation process'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 18 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 18 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0304, 0.0176, ..., -0.0221]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 2 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: similarity=0.5182
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
ğŸ“ RAG DEBUG: Processing chunk 2: similarity=0.2882
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
ğŸ¯ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
ğŸ“– RAG DEBUG: Context 1 length: 365 chars
ğŸ“– RAG DEBUG: Context 2 length: 997 chars
ğŸ” RAG DEBUG: Starting context retrieval for query: 'policy manual'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 13 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 13 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0572, 0.0336, ..., 0.0105]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 2 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: similarity=0.3758
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
ğŸ“ RAG DEBUG: Processing chunk 2: similarity=0.3335
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
ğŸ¯ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
ğŸ“– RAG DEBUG: Context 1 length: 997 chars
ğŸ“– RAG DEBUG: Context 2 length: 365 chars
ğŸ” RAG DEBUG: Starting context retrieval for query: 'contact information'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 19 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 19 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0824, 0.0622, ..., -0.0076]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 2 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: similarity=0.3555
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
ğŸ“ RAG DEBUG: Processing chunk 2: similarity=0.3098
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
ğŸ¯ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
ğŸ“– RAG DEBUG: Context 1 length: 365 chars
ğŸ“– RAG DEBUG: Context 2 length: 997 chars
ğŸ” RAG DEBUG: Starting context retrieval for query: 'business hours Monday'
ğŸ“‹ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
ğŸ§  RAG DEBUG: Generating query embedding...
ğŸ§  RAG DEBUG: Generating embedding for text (length: 21 chars)
ğŸ”§ RAG DEBUG: Using model: all-MiniLM-L6-v2
âœ‚ï¸ RAG DEBUG: Text prepared (cleaned length: 21 chars)
âœ… RAG DEBUG: Using actual model for embedding generation
ğŸ¯ RAG DEBUG: Real embedding generated - dimension: 384
ğŸ“Š RAG DEBUG: Embedding vector preview: [-0.0195, 0.0215, ..., -0.0300]
âœ… RAG DEBUG: Query embedding generated (dimension: 384)
ğŸ” RAG DEBUG: Performing similarity search in vector database...
ğŸ“Š RAG DEBUG: Similarity search returned 1 chunks
ğŸ“ RAG DEBUG: Processing chunk 1: similarity=0.3740
ğŸ“„ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
ğŸ¯ RAG DEBUG: Context retrieval complete - 1 contexts retrieved
ğŸ“– RAG DEBUG: Context 1 length: 997 chars
ğŸ“Š Performance Results:
  â€¢ 'customer support hours': 2 contexts, 80.35ms, avg sim: 0.5191
  â€¢ 'escalation process': 2 contexts, 80.93ms, avg sim: 0.4032
  â€¢ 'policy manual': 2 contexts, 70.19ms, avg sim: 0.3547
  â€¢ 'contact information': 2 contexts, 63.51ms, avg sim: 0.3327
  â€¢ 'business hours Monday': 1 contexts, 97.68ms, avg sim: 0.374

ğŸ¯ RAG System Assessment
========================================
ğŸ“Š Knowledge Base Size: 2 embeddings
âš¡ Average Response Time: 78.53ms
ğŸ¯ Query Success Rate: 5/5 (100.0%)
ğŸ”§ Vector Search: âœ… Working (fallback mode)
ğŸ§  Embedding Generation: âœ… Working
ğŸ’¬ Message Integration: âœ… Working

ğŸ’¡ Recommendations
------------------------------
âœ… RAG system is performing well
ğŸ’¡ For optimal performance, set up PostgreSQL RPC functions
>>>>>>> Stashed changes
