<<<<<<< Updated upstream
main-app.js?v=1754287810841:1126 Download the React DevTools for a better development experience: https://react.dev/link/react-devtools
D:\chat_service\frontend\saas-chatbot\app\dashboard\chatbots\[id]\page.tsx:29 üîç Fetching chatbot details for ID: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\lib\api.ts:86 üë§ Current user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:117 üöÄ API Request (Supabase-native): {url: 'http://localhost:8000/api/v1/chatbots/5e69ab00-d86‚Ä¶338a0895?user_email=akhilpalla%40webuildtrades.co', method: 'GET', userEmail: 'akhilpalla@webuildtrades.co', body: null}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:126 üì° Attempt 1/4 - Fetching: http://localhost:8000/api/v1/chatbots/5e69ab00-d866-46ab-b20b-fec3338a0895?user_email=akhilpalla%40webuildtrades.co
content_script.js:2726 [tiptap warn]: Duplicate extension names found: ['link', 'dropCursor', 'codeBlock', 'image']. This can lead to issues.
e.<computed> @ content_script.js:2726
resolve @ content_script_sidebar.js:628
B @ content_script_sidebar.js:628
createExtensionManager @ content_script_sidebar.js:628
t.Editor @ content_script_sidebar.js:628
g @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
Dl @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
_l @ content_script_sidebar.js:3018
pl @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Ui @ content_script_sidebar.js:3018
qi @ content_script_sidebar.js:3018
sl @ content_script_sidebar.js:3018
enqueueSetState @ content_script_sidebar.js:3018
g.setState @ content_script_sidebar.js:3018
processMutation @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:1074
s.emit @ content_script_sidebar.js:747
emitMutation @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
a @ content_script_sidebar.js:2
Promise.then
l @ content_script_sidebar.js:2
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
u @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
c @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:3360
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
Y.init @ content_script_sidebar.js:3360
(anonymous) @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
processUIEvent @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
processUIEvent @ content_script_sidebar.js:747
(anonymous) @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
processEvent @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
componentDidMount @ content_script_sidebar.js:1074
(anonymous) @ content_script_sidebar.js:4490
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
componentDidMount @ content_script_sidebar.js:4490
us @ content_script_sidebar.js:3018
Al @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Cl @ content_script_sidebar.js:3018
pl @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Ui @ content_script_sidebar.js:3018
qi @ content_script_sidebar.js:3018
sl @ content_script_sidebar.js:3018
enqueueSetState @ content_script_sidebar.js:3018
g.setState @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:4490
a @ content_script_sidebar.js:2
Promise.then
l @ content_script_sidebar.js:2
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
componentDidMount @ content_script_sidebar.js:4490
us @ content_script_sidebar.js:3018
Al @ content_script_sidebar.js:3018
t.unstable_runWithPriority @ content_script_sidebar.js:3018
Fi @ content_script_sidebar.js:3018
Cl @ content_script_sidebar.js:3018
pl @ content_script_sidebar.js:3018
sl @ content_script_sidebar.js:3018
Vl @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:3018
fl @ content_script_sidebar.js:3018
Ql @ content_script_sidebar.js:3018
t.render @ content_script_sidebar.js:3018
(anonymous) @ content_script_sidebar.js:4490
(anonymous) @ content_script_sidebar.js:4490
a @ content_script_sidebar.js:2
Promise.then
l @ content_script_sidebar.js:2
(anonymous) @ content_script_sidebar.js:2
u @ content_script_sidebar.js:2
c @ content_script_sidebar.js:4490
(anonymous) @ content_script_sidebar.js:4490
s.emit @ content_script.js:747
(anonymous) @ content_script.js:2726
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
reloadComponent @ content_script.js:2726
(anonymous) @ content_script.js:2726
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
reloadRibbon @ content_script.js:2726
(anonymous) @ content_script.js:2726
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
handleHistoryStateUpdate @ content_script.js:2726
handleHistoryStateUpdate @ content_script.js:411
(anonymous) @ content_script.js:411
a @ content_script.js:2
Promise.then
l @ content_script.js:2
(anonymous) @ content_script.js:2
u @ content_script.js:2
d @ content_script.js:411
messageResponder @ content_script.js:411
onMessage @ browser-polyfill.js:1079
D:\chat_service\frontend\saas-chatbot\lib\api.ts:129 ‚úÖ Response received: {status: 200, statusText: 'OK', headers: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:157 üì¶ Response data: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally ‚Ä¶fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant ‚Ä¶y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {‚Ä¶},¬†‚Ä¶}
D:\chat_service\frontend\saas-chatbot\app\dashboard\chatbots\[id]\page.tsx:31 ‚úÖ Chatbot data loaded: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally ‚Ä¶fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant ‚Ä¶y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {‚Ä¶},¬†‚Ä¶}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 üîç VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 üîç VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 üîç VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and services‚Äîoffering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 üîç VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 üîç VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 üîç VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 üîç VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 üîç VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 üîç VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 üîç VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 üîç VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 üîç VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 üé§ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 üîç RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 üîç RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 üîç RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 üîß VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 üîç VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 üîç VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 üîç VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 ‚úÖ VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 üîä TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 üîä TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 üîä TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 üîä TTS DEBUG: üéØ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 üîä TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 ‚úÖ TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 üîä TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 üîä TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 üîä TTS DEBUG: Available browser voices: 0
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 üîä TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 üîä TTS DEBUG: üìã TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 üîä TTS DEBUG: ‚úÖ Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 üîä TTS DEBUG: üîß Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 üîä TTS DEBUG: üéØ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 üîä TTS DEBUG: üí∞ COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 üîä TTS DEBUG: üîß NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 üîä TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 ‚úÖ VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 üîç VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 üîç VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 üîç VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and services‚Äîoffering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 üîç VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 üîç VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 üîç VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 üîç VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 üîç VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 üîç VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 üîç VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 üîç VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 üîç VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 üé§ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 üîç RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 üîç RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 üîç RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 üîß VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 üîç VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 üîç VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 üîç VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 ‚úÖ VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 üîä TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 üîä TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 üîä TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 üîä TTS DEBUG: üéØ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 üîä TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 ‚úÖ TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 üîä TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 üîä TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 üîä TTS DEBUG: Available browser voices: 0
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 üîä TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 üîä TTS DEBUG: üìã TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 üîä TTS DEBUG: ‚úÖ Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 üîä TTS DEBUG: üîß Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 üîä TTS DEBUG: üéØ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 üîä TTS DEBUG: üí∞ COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 üîä TTS DEBUG: üîß NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 üîä TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 ‚úÖ VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:184 üîä TTS DEBUG: Available browser voices (delayed): 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:185 üîä TTS DEBUG: üìã Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:184 üîä TTS DEBUG: Available browser voices (delayed): 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:185 üîä TTS DEBUG: üìã Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:187   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:67 üìö RAG DEBUG: Loading documents for chatbot: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:67 üìö RAG DEBUG: Loading documents for chatbot: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:71 ‚úÖ RAG DEBUG: Documents loaded successfully: {count: 1, documents: Array(1)}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:71 ‚úÖ RAG DEBUG: Documents loaded successfully: {count: 1, documents: Array(1)}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:96 üíæ VOICE DEBUG: ==================== SAVING SETTINGS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:97 üíæ VOICE DEBUG: Saving chatbot settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:98 üíæ VOICE DEBUG: Current settings state: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and services‚Äîoffering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "is_active": true,
  "appearance_config": {
    "theme": "light",
    "primaryColor": "#3b82f6",
    "position": "bottom-right",
    "greetingMessage": "Hello! How can I help you today?",
    "botName": "Assistant",
    "showAvatar": true,
    "avatarUrl": "",
    "welcomeTitle": "Welcome"
  },
  "behavior_config": {
    "enableVoice": true,
    "enableTypingIndicator": true,
    "enableEmoji": true,
    "maxTokens": 1000,
    "temperature": 0.7
  }
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:99 üíæ VOICE DEBUG: Voice settings specifically: {enableVoice: true, behaviorConfigExists: true, fullBehaviorConfig: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:116 üíæ VOICE DEBUG: Update data being sent to backend: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and services‚Äîoffering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "is_active": true,
  "appearance_config": {
    "theme": "light",
    "primaryColor": "#3b82f6",
    "position": "bottom-right",
    "greetingMessage": "Hello! How can I help you today?",
    "botName": "Assistant",
    "showAvatar": true,
    "avatarUrl": "",
    "welcomeTitle": "Welcome"
  },
  "behavior_config": {
    "enableVoice": true,
    "enableTypingIndicator": true,
    "enableEmoji": true,
    "maxTokens": 1000,
    "temperature": 0.7
  }
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:117 üíæ VOICE DEBUG: behavior_config in update data: {enableVoice: true, enableTypingIndicator: true, enableEmoji: true, maxTokens: 1000, temperature: 0.7}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:118 üíæ VOICE DEBUG: enableVoice in update data: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:120 üì° VOICE DEBUG: Sending update request to backend...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:121 üîÑ EMBEDDING: Starting save with automatic embedding generation...
D:\chat_service\frontend\saas-chatbot\lib\api.ts:86 üë§ Current user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:117 üöÄ API Request (Supabase-native): {url: 'http://localhost:8000/api/v1/chatbots/5e69ab00-d86‚Ä¶338a0895?user_email=akhilpalla%40webuildtrades.co', method: 'PUT', userEmail: 'akhilpalla@webuildtrades.co', body: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:126 üì° Attempt 1/4 - Fetching: http://localhost:8000/api/v1/chatbots/5e69ab00-d866-46ab-b20b-fec3338a0895?user_email=akhilpalla%40webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:129 ‚úÖ Response received: {status: 200, statusText: 'OK', headers: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:157 üì¶ Response data: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally ‚Ä¶fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant ‚Ä¶y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {‚Ä¶},¬†‚Ä¶}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:124 ‚úÖ VOICE DEBUG: Settings saved successfully
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:125 ‚úÖ VOICE DEBUG: Backend response: {name: 'voice-agent ', description: 'This voice assistant helps customers by naturally ‚Ä¶fering a seamless, human-like support experience.', system_prompt: 'You are a helpful, conversational voice assistant ‚Ä¶y offer to connect the customer to a human agent.', model: 'llama-3.1-8b-instant', appearance_config: {‚Ä¶},¬†‚Ä¶}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-settings.tsx:129 üìä EMBEDDING: Processing results: undefined
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 üîç VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 üîç VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 üîç VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and services‚Äîoffering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 üîç VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 üîç VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 üîç VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 üîç VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 üîç VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 üîç VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 üîç VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 üîç VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 üîç VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 üé§ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 üîç RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 üîç RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 üîç RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 üîß VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 üîç VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 üîç VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 üîç VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 ‚úÖ VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 üîä TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 üîä TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 üîä TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 üîä TTS DEBUG: üéØ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 üîä TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 ‚úÖ TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 üîä TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 üîä TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 üîä TTS DEBUG: Available browser voices: 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:191 üîä TTS DEBUG: üìã Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 üîä TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 üîä TTS DEBUG: üìã TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 üîä TTS DEBUG: ‚úÖ Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 üîä TTS DEBUG: üîß Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 üîä TTS DEBUG: üéØ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 üîä TTS DEBUG: üí∞ COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 üîä TTS DEBUG: üîß NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 üîä TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 ‚úÖ VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:57 üîç VOICE DEBUG: ==================== CHATBOT ANALYSIS ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:58 üîç VOICE DEBUG: Checking chatbot voice settings...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:59 üîç VOICE DEBUG: Full chatbot object: {
  "name": "voice-agent ",
  "description": "This voice assistant helps customers by naturally engaging in conversations to answer queries, resolve issues, and provide clear, detailed information about our products and services‚Äîoffering a seamless, human-like support experience.",
  "system_prompt": "You are a helpful, conversational voice assistant for Walmart. Speak in a clear, friendly, and professional tone. Your role is to assist customers by naturally answering their questions, resolving their concerns, and providing accurate, detailed information about our products and services. Keep responses concise, engaging, and easy to understand in a spoken format. Use simple, conversational language and confirm understanding when needed. If you're unsure or the request is beyond your capabilities, politely offer to connect the customer to a human agent.",
  "model": "llama-3.1-8b-instant",
  "appearance_config": {
    "theme": "light",
    "botName": "Assistant",
    "position": "bottom-right",
    "avatarUrl": "",
    "showAvatar": true,
    "primaryColor": "#3b82f6",
    "welcomeTitle": "Welcome",
    "greetingMessage": "Hello! How can I help you today?"
  },
  "behavior_config": {
    "maxTokens": 1000,
    "enableEmoji": true,
    "enableVoice": true,
    "temperature": 0.7,
    "enableTypingIndicator": true
  },
  "is_active": true,
  "id": "5e69ab00-d866-46ab-b20b-fec3338a0895",
  "user_id": "6ff34613-5262-4073-b0a1-68b36873e3db",
  "created_at": "2025-08-01T10:56:34.844446Z",
  "updated_at": "2025-08-04T06:08:49.508670Z"
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:60 üîç VOICE DEBUG: chatbot exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:61 üîç VOICE DEBUG: chatbot.id: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:62 üîç VOICE DEBUG: behavior_config exists: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:63 üîç VOICE DEBUG: behavior_config type: object
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:64 üîç VOICE DEBUG: behavior_config content: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:65 üîç VOICE DEBUG: enableVoice value: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:66 üîç VOICE DEBUG: enableVoice type: boolean
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:67 üîç VOICE DEBUG: ===================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:70 üîç VOICE DEBUG: Final isVoiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:75 üé§ VOICE DEBUG: Voice chat enabled for this chatbot - initializing services
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:76 üîç RAG DEBUG: Voice mode enabled - checking RAG impact
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:77 üîç RAG DEBUG: Chatbot will use voice processing pipeline
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:78 üîç RAG DEBUG: This may affect how RAG context is retrieved and processed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:91 üîß VOICE DEBUG: Starting voice services initialization...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:95 üîç VOICE DEBUG: Checking for Speech Recognition API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:96 üîç VOICE DEBUG: webkitSpeechRecognition available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:97 üîç VOICE DEBUG: SpeechRecognition available: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:106 ‚úÖ VOICE DEBUG: Speech Recognition initialized with settings: {continuous: false, interimResults: false, lang: 'en-US'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:165 üîä TTS DEBUG: ==================== TTS SYSTEM DETECTION ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:166 üîä TTS DEBUG: Checking for Speech Synthesis API...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:167 üîä TTS DEBUG: speechSynthesis available: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:168 üîä TTS DEBUG: üéØ CURRENT TTS SYSTEM: Browser Web Speech API (NOT Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:169 üîä TTS DEBUG: This uses the browser's built-in text-to-speech engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:173 ‚úÖ TTS DEBUG: Browser Speech Synthesis initialized
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:174 üîä TTS DEBUG: TTS Provider: Browser Web Speech API
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:175 üîä TTS DEBUG: TTS Type: Client-side (no API calls to Deepgram)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:179 üîä TTS DEBUG: Available browser voices: 22
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:191 üîä TTS DEBUG: üìã Voice List (Browser TTS):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   1. Microsoft George - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   2. Microsoft Hazel - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   3. Microsoft Susan - English (United Kingdom) (en-GB) - Local - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   4. Google Deutsch (de-DE) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:193   5. Google US English (en-US) - Remote - Browser Engine
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:207 üîä TTS DEBUG: Checking TTS implementation status...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:208 üîä TTS DEBUG: üìã TTS SYSTEM STATUS (TEMPORARY):
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:209 üîä TTS DEBUG: ‚úÖ Browser TTS: IMPLEMENTED and ACTIVE
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:210 üîä TTS DEBUG: üîß Deepgram TTS: IMPLEMENTED but TEMPORARILY DISABLED
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:211 üîä TTS DEBUG: üéØ CURRENT STRATEGY: Browser TTS only
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:212 üîä TTS DEBUG: üí∞ COST: Browser $0.00 (free)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:213 üîä TTS DEBUG: üîß NOTE: Fixing Deepgram API integration (CORS + Auth issues)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:214 üîä TTS DEBUG: ===============================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:216 ‚úÖ VOICE DEBUG: Voice services initialization completed
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:694 üß™ Sending test chat message to chatbot: 5e69ab00-d866-46ab-b20b-fec3338a0895
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:703 üîç RAG FLOW DEBUG: ==================== TEXT MESSAGE PROCESSING ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:704 üì° RAG FLOW DEBUG: Calling testChatbot API with message: What are your customer support business hours?
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:705 üí¨ RAG FLOW DEBUG: Conversation history length: 1
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:706 üîç RAG FLOW DEBUG: Voice enabled for this chatbot: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:707 üîç RAG FLOW DEBUG: This is a TEXT-based message (not voice input)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:708 üîç RAG FLOW DEBUG: Chatbot behavior_config: {
  "maxTokens": 1000,
  "enableEmoji": true,
  "enableVoice": true,
  "temperature": 0.7,
  "enableTypingIndicator": true
}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:709 üîç RAG FLOW DEBUG: Expected: RAG should work normally for text messages regardless of voice setting
D:\chat_service\frontend\saas-chatbot\lib\api.ts:86 üë§ Current user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:117 üöÄ API Request (Supabase-native): {url: 'http://localhost:8000/api/v1/chatbots/5e69ab00-d86‚Ä¶est-chat?user_email=akhilpalla%40webuildtrades.co', method: 'POST', userEmail: 'akhilpalla@webuildtrades.co', body: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:126 üì° Attempt 1/4 - Fetching: http://localhost:8000/api/v1/chatbots/5e69ab00-d866-46ab-b20b-fec3338a0895/test-chat?user_email=akhilpalla%40webuildtrades.co
D:\chat_service\frontend\saas-chatbot\lib\api.ts:129 ‚úÖ Response received: {status: 200, statusText: 'OK', headers: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\lib\api.ts:157 üì¶ Response data: {response: 'Our customer support is available 24 hours a day, ‚Ä¶here anything specific I can help you with today?', conversation_id: 'test', rag_enabled: false, context_count: 0, model: 'llama-3.1-8b-instant'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:716 üîç RAG FLOW DEBUG: ==================== RESPONSE RECEIVED ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:717 üéØ RAG FLOW DEBUG: Got chatbot response: {hasResponse: true, responseLength: 345, ragEnabled: false, contextCount: 0, model: 'llama-3.1-8b-instant',¬†‚Ä¶}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:726 üîç RAG FLOW DEBUG: RAG Analysis:
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:727    - RAG Enabled: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:728    - Context Count: 0
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:729    - Contains PDF content: false
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:730    - Is generic response: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:747 üîç RAG FLOW DEBUG: ==================== VOICE PROCESSING CHECK ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:748 üîä RAG FLOW DEBUG: Text message response completed: {voiceEnabled: true, shouldUseVoice: true, responseLength: 345, behaviorConfig: {‚Ä¶}}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:754 üîç RAG FLOW DEBUG: Voice processing decision:
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:755    - Voice enabled in settings: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:756    - Should use voice for response: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:757    - Will trigger TTS: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email, or visit us in-store for assistance. If you're calling from within the US, you can reach us at 1-800-WALMART (1-800-925-6278). We're here to help with any questions or concerns you may have. Is there anything specific I can help you with today?
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:760 üîä TEXT DEBUG: ‚úÖ FORCING speech synthesis for text message (bypassing state issue)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:761 üîä TEXT DEBUG: Text message response to speak: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email,...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:762 üîä TEXT DEBUG: üéØ Using HYBRID TTS: Deepgram (Primary) ‚Üí Browser (Fallback)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:478 üîä TTS DEBUG: ==================== HYBRID TTS SYSTEM ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:479 üîä TTS DEBUG: speakResponse called with text: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email,...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:480 üîä TTS DEBUG: voiceEnabled: true
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:481 üîä TTS DEBUG: text length: 345
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:482 üîä TTS DEBUG: üéØ Using HYBRID TTS: Deepgram (Primary) ‚Üí Browser (Fallback)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:491 üîä TTS DEBUG: üéØ TRYING: Deepgram TTS (Primary)
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:360 üîä DEEPGRAM TTS: ==================== DEEPGRAM TTS SYSTEM ====================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:361 üîä DEEPGRAM TTS: Starting TTS request for text: Our customer support is available 24 hours a day, 7 days a week. You can contact us by phone, email,...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:362 üîä DEEPGRAM TTS: Text length: 345
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:368 üîä DEEPGRAM TTS: Calling frontend TTS API route...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:377 üîä DEEPGRAM TTS: Got user email: akhilpalla@webuildtrades.co
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:404 üîä DEEPGRAM TTS: Frontend API response status: 200
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:418 üîä DEEPGRAM TTS: Received audio buffer: {size: 139494, type: 'ArrayBuffer'}
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:431 üîä DEEPGRAM TTS: Created audio URL: blob:http://localhost:3000/8d12cca5-8c07-4fd9-9b52-5ef65517b776
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:463 üîä DEEPGRAM TTS: Starting audio playback...
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:446 üîä DEEPGRAM TTS: Audio playback started
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:438 üîä DEEPGRAM TTS: Audio loading started
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:442 üîä DEEPGRAM TTS: Audio can start playing
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:466 üîä DEEPGRAM TTS: ‚úÖ SUCCESS: Deepgram TTS completed successfully
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:474 üîä DEEPGRAM TTS: ================================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:493 üîä TTS DEBUG: ‚úÖ SUCCESS: Deepgram TTS completed successfully
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:519 üîä TTS DEBUG: ================================================================
D:\chat_service\frontend\saas-chatbot\components\dashboard\chatbot-test.tsx:766 üîä TEXT DEBUG: ‚úÖ Hybrid TTS completed for text message
=======
(venv) D:\chat_service\backend>  python test_rag_comprehensive.py
üéØ Comprehensive RAG System Test
========================================
Token will not been saved to git credential helper. Pass `add_to_git_credential=True` if you want to set the git credential as well.
Failed to login to Hugging Face: Invalid token passed!
Failed to load model BAAI/bge-small-en-v1.5: 401 Client Error. (Request ID: Root=1-68919865-16dbb47062dcbd3f178f1afe;ef705566-343d-471c-a1a6-47e3c683c0bb)

Repository Not Found for url: https://huggingface.co/api/models/BAAI/bge-small-en-v1.5.
Please make sure you specified the correct `repo_id` and `repo_type`.
If you are trying to access a private or gated repo, make sure you are authenticated.
User Access Token "saas-chatbot" is expired
Using dummy embeddings - model loading failed
Failed to initialize Google Drive service: Service account info was not in the expected format, missing fields client_email, token_uri.
ü§ñ Testing with chatbot: 5e69ab00...
üë§ Testing with user: 6ff34613...

üìä Test 1: Document and Embedding Status
------------------------------
üìÑ Documents found: 1
  ‚Ä¢ Customer_Support_Policy_Manual.pdf (processed: True)
üî¢ Vector embeddings found: 2
  ‚Ä¢ Sample embedding dimension: 4704
  ‚Ä¢ Sample content length: 365 chars

üß† Test 2: Embedding Generation
------------------------------
üìù Test query: 'What are your customer support business hours?'
üß† RAG DEBUG: Generating embedding for text (length: 46 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 46 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
‚úÖ Embedding generated: 384 dimensions
üìä Embedding preview: [-0.0676, -0.0025, ..., -0.0310]

üîç Test 3: Vector Store Retrieval
------------------------------
üîç RAG DEBUG: Starting context retrieval for query: 'What are your customer support business hours?'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 3, Threshold: 0.1
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 46 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 46 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 2 chunks
üìù RAG DEBUG: Processing chunk 1: similarity=0.6244
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
üìù RAG DEBUG: Processing chunk 2: similarity=0.3609
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
üéØ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
üìñ RAG DEBUG: Context 1 length: 997 chars
üìñ RAG DEBUG: Context 2 length: 365 chars
üìö Retrieved contexts: 2
  üìÑ Context 1 (similarity: 0.624376796223117):
      'Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...'
  üìÑ Context 2 (similarity: 0.36092808842659):
      'Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...'

üî¨ Test 4: Hybrid Search
------------------------------
üîç RAG DEBUG: Starting HYBRID context retrieval for query: 'What are your customer support business hours?'
üìã RAG DEBUG: Hybrid=True, BM25 weight=0.3, Vector weight=0.7
üöÄ RAG DEBUG: Performing hybrid search...
üß† RAG DEBUG: Generating embedding for text (length: 46 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 46 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
Keyword search failed, using fallback: {'code': 'PGRST202', 'details': 'Searched for the function public.execute_sql with parameters params, sql_query or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.', 'hint': None, 'message': 'Could not find the function public.execute_sql(params, sql_query) in the schema cache'}
Simple keyword search failed: {'message': 'JSON could not be generated', 'code': 500, 'hint': 'Refer to full message for details', 'details': 'b\'<!DOCTYPE html>\\n<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en-US"> <![endif]-->\\n<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en-US"> <![endif]-->\\n<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en-US"> <![endif]-->\\n<!--[if gt IE 8]><!--> <html class="no-js" lang="en-US"> <!--<![endif]-->\\n<head>\\n<title>Worker threw exception | kcbiyzfcqvcgvnjxiytv.supabase.co | Cloudflare</title>\\n<meta charset="UTF-8" />\\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\\n<meta http-equiv="X-UA-Compatible" content="IE=Edge" />\\n<meta name="robots" content="noindex, nofollow" />\\n<meta name="viewport" content="width=device-width,initial-scale=1" />\\n<link rel="stylesheet" id="cf_styles-css" href="/cdn-cgi/styles/cf.errors.css" />\\n<!--[if lt IE 9]><link rel="stylesheet" id=\\\'cf_styles-ie-css\\\' href="/cdn-cgi/styles/cf.errors.ie.css" /><![endif]-->\\n<style>body{margin:0;padding:0}</style>\\n\\n\\n<!--[if gte IE 10]><!-->\\n<script>\\n  if (!navigator.cookieEnabled) {\\n    window.addEventListener(\\\'DOMContentLoaded\\\', function () {\\n      var cookieEl = document.getElementById(\\\'cookie-alert\\\');\\n      cookieEl.style.display = \\\'block\\\';\\n    })\\n  }\\n</script>\\n<!--<![endif]-->\\n\\n\\n</head>\\n<body>\\n  <div id="cf-wrapper">\\n    <div class="cf-alert cf-alert-error cf-cookie-error" id="cookie-alert" data-translate="enable_cookies">Please enable cookies.</div>\\n    <div id="cf-error-details" class="cf-error-details-wrapper">\\n      <div class="cf-wrapper cf-header cf-error-overview">\\n        <h1>\\n          <span class="cf-error-type" data-translate="error">Error</span>\\n          <span class="cf-error-code">1101</span>\\n          <small class="heading-ray-id">Ray ID: 96a3f043daafffa1 &bull; 2025-08-05 05:36:44 UTC</small>\\n        </h1>\\n        <h2 class="cf-subheadline" data-translate="error_desc">Worker threw exception</h2>\\n      </div><!-- /.header -->\\n\\n      <section></section><!-- spacer -->\\n\\n      <div class="cf-section cf-wrapper">\\n        <div class="cf-columns two">\\n          <div class="cf-column">\\n            <h2 data-translate="what_happened">What happened?</h2>\\n            <p>You\\\'ve requested a page on a website (kcbiyzfcqvcgvnjxiytv.supabase.co) that is on the <a href="https://www.cloudflare.com/5xx-error-landing/" target="_blank">Cloudflare</a> network. An unknown error occurred while rendering the page.</p>\\n          </div>\\n\\n          \\n          <div class="cf-column">\\n           
 <h2 data-translate="what_can_i_do">What can I do?</h2>\\n            <p><strong>If you are the owner of this website:</strong><br />refer to <a href="https://developers.cloudflare.com/workers/observability/errors/" target="_blank">Workers - Errors and Exceptions</a> and check Workers Logs for kcbiyzfcqvcgvnjxiytv.supabase.co.</p>\\n          </div>\\n          \\n        </div>\\n      </div><!-- /.section -->\\n\\n      <div class="cf-error-footer cf-wrapper w-240 lg:w-full py-10 sm:py-4 sm:px-8 mx-auto text-center sm:text-left border-solid border-0 border-t border-gray-300">\\n  <p class="text-13">\\n    <span class="cf-footer-item sm:block sm:mb-1">Cloudflare Ray ID: <strong class="font-semibold">96a3f043daafffa1</strong></span>\\n    <span class="cf-footer-separator sm:hidden">&bull;</span>\\n    <span id="cf-footer-item-ip" class="cf-footer-item hidden sm:block sm:mb-1">\\n      Your IP:\\n      <button type="button" id="cf-footer-ip-reveal" class="cf-footer-ip-reveal-btn">Click to reveal</button>\\n      <span class="hidden" id="cf-footer-ip">103.217.89.135</span>\\n      <span class="cf-footer-separator sm:hidden">&bull;</span>\\n    </span>\\n    <span class="cf-footer-item sm:block sm:mb-1"><span>Performance &amp; security by</span> <a rel="noopener noreferrer" href="https://www.cloudflare.com/5xx-error-landing" id="brand_link" target="_blank">Cloudflare</a></span>\\n    \\n  </p>\\n  <script>(function(){function d(){var b=a.getElementById("cf-footer-item-ip"),c=a.getElementById("cf-footer-ip-reveal");b&&"classList"in b&&(b.classList.remove("hidden"),c.addEventListener("click",function(){c.classList.add("hidden");a.getElementById("cf-footer-ip").classList.remove("hidden")}))}var a=document;document.addEventListener&&a.addEventListener("DOMContentLoaded",d)})();</script>\\n</div><!-- /.error-footer -->\\n\\n\\n    </div><!-- /#cf-error-details -->\\n  </div><!-- /#cf-wrapper -->\\n\\n  <script>\\n  window._cf_translation = {};\\n  \\n  \\n</script>\\n\\n</body>\\n</html>\\n\''}    
üìä RAG DEBUG: Hybrid search returned 2 chunks
üìù RAG DEBUG: Processing chunk 1: hybrid_score=0.7000, similarity=0.6244
üìù RAG DEBUG: Processing chunk 2: hybrid_score=0.4046, similarity=0.3609
‚úÖ RAG DEBUG: Hybrid retrieval complete - 2 contexts selected
üéØ Hybrid search results: 2
  üìÑ Hybrid 1 (similarity: 0.624376796223117):
      'Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...'
  üìÑ Hybrid 2 (similarity: 0.36092808842659):
      'Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...'

üí¨ Test 5: Message Service RAG Integration
------------------------------
ü§ñ Chatbot: voice-agent 
üéØ Generating RAG response...
ü§ñ RAG DEBUG: Starting LLM response generation
üìä RAG DEBUG: RAG enabled: True
üéØ RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895
üí¨ RAG DEBUG: User message: 'What are your customer support business hours?'
üîç RAG DEBUG: RAG mode - retrieving relevant context...
üîç RAG DEBUG: Starting context retrieval for query: 'What are your customer support business hours?'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 3, Threshold: 0.7
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 46 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 46 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0676, -0.0025, ..., -0.0310]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 0 chunks
‚ö†Ô∏è RAG DEBUG: No relevant context found for query in chatbot 5e69ab00-d866-46ab-b20b-fec3338a0895
üìö RAG DEBUG: Retrieved 0 context chunks
‚ö†Ô∏è RAG DEBUG: No relevant context found - falling back to standard response
üîÑ RAG DEBUG: No context available, generating standard response...
‚úÖ RAG DEBUG: Standard response generated (no context available)
‚úÖ Response generated successfully!
üìä RAG enabled: False
üìä Context count: 0
üìä Model used: llama-3.1-8b-instant
üìÑ Response preview: Our Walmart customer support team is available 24 hours a day, 7 days a week, to assist you with any questions or concerns you may have. You can reach us by phone, online chat, or through our mobile a... 

‚ö° Test 6: Performance Metrics
------------------------------
üîç RAG DEBUG: Starting context retrieval for query: 'customer support hours'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 22 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 22 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.1350, 0.0177, ..., -0.0452]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 2 chunks
üìù RAG DEBUG: Processing chunk 1: similarity=0.6848
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
üìù RAG DEBUG: Processing chunk 2: similarity=0.3535
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
üéØ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
üìñ RAG DEBUG: Context 1 length: 997 chars
üìñ RAG DEBUG: Context 2 length: 365 chars
üîç RAG DEBUG: Starting context retrieval for query: 'escalation process'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 18 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 18 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0304, 0.0176, ..., -0.0221]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 2 chunks
üìù RAG DEBUG: Processing chunk 1: similarity=0.5182
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
üìù RAG DEBUG: Processing chunk 2: similarity=0.2882
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
üéØ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
üìñ RAG DEBUG: Context 1 length: 365 chars
üìñ RAG DEBUG: Context 2 length: 997 chars
üîç RAG DEBUG: Starting context retrieval for query: 'policy manual'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 13 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 13 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0572, 0.0336, ..., 0.0105]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 2 chunks
üìù RAG DEBUG: Processing chunk 1: similarity=0.3758
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
üìù RAG DEBUG: Processing chunk 2: similarity=0.3335
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
üéØ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
üìñ RAG DEBUG: Context 1 length: 997 chars
üìñ RAG DEBUG: Context 2 length: 365 chars
üîç RAG DEBUG: Starting context retrieval for query: 'contact information'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 19 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 19 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0824, 0.0622, ..., -0.0076]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 2 chunks
üìù RAG DEBUG: Processing chunk 1: similarity=0.3555
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
6. Escalation Matrix
If your query is unresolved:
1. Level 1: Support...
üìù RAG DEBUG: Processing chunk 2: similarity=0.3098
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
üéØ RAG DEBUG: Context retrieval complete - 2 contexts retrieved
üìñ RAG DEBUG: Context 1 length: 365 chars
üìñ RAG DEBUG: Context 2 length: 997 chars
üîç RAG DEBUG: Starting context retrieval for query: 'business hours Monday'
üìã RAG DEBUG: Chatbot ID: 5e69ab00-d866-46ab-b20b-fec3338a0895, Max contexts: 2, Threshold: 0.1
üß† RAG DEBUG: Generating query embedding...
üß† RAG DEBUG: Generating embedding for text (length: 21 chars)
üîß RAG DEBUG: Using model: all-MiniLM-L6-v2
‚úÇÔ∏è RAG DEBUG: Text prepared (cleaned length: 21 chars)
‚úÖ RAG DEBUG: Using actual model for embedding generation
üéØ RAG DEBUG: Real embedding generated - dimension: 384
üìä RAG DEBUG: Embedding vector preview: [-0.0195, 0.0215, ..., -0.0300]
‚úÖ RAG DEBUG: Query embedding generated (dimension: 384)
üîé RAG DEBUG: Performing similarity search in vector database...
üìä RAG DEBUG: Similarity search returned 1 chunks
üìù RAG DEBUG: Processing chunk 1: similarity=0.3740
üìÑ RAG DEBUG: Chunk content preview: Customer Support Policy Manual
1. Introduction
Welcome to our customer support policy guide. This do...
üéØ RAG DEBUG: Context retrieval complete - 1 contexts retrieved
üìñ RAG DEBUG: Context 1 length: 997 chars
üìä Performance Results:
  ‚Ä¢ 'customer support hours': 2 contexts, 80.35ms, avg sim: 0.5191
  ‚Ä¢ 'escalation process': 2 contexts, 80.93ms, avg sim: 0.4032
  ‚Ä¢ 'policy manual': 2 contexts, 70.19ms, avg sim: 0.3547
  ‚Ä¢ 'contact information': 2 contexts, 63.51ms, avg sim: 0.3327
  ‚Ä¢ 'business hours Monday': 1 contexts, 97.68ms, avg sim: 0.374

üéØ RAG System Assessment
========================================
üìä Knowledge Base Size: 2 embeddings
‚ö° Average Response Time: 78.53ms
üéØ Query Success Rate: 5/5 (100.0%)
üîß Vector Search: ‚úÖ Working (fallback mode)
üß† Embedding Generation: ‚úÖ Working
üí¨ Message Integration: ‚úÖ Working

üí° Recommendations
------------------------------
‚úÖ RAG system is performing well
üí° For optimal performance, set up PostgreSQL RPC functions
>>>>>>> Stashed changes
